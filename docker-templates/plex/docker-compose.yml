version: '3.7'

services:
    plex:
        container_name: plex
        volumes:
            - '/etc/localtime:/etc/localtime:ro'
            - '/etc/timezone:/etc/timezone:ro'
            - "/docker-nas/docker-data/plex:/config"
            - '/tmp/transcode:/transcode'
            - "/docker-nas/home:/docker-nas/home:shared"
        restart: unless-stopped
        network_mode: host
        env_file:
            - /docker-nas/docker-templates/plex/.env
        environment:
            - CHANGE_CONFIG_DIR_OWNERSHIP=true
            - HOME=/config
            - "PLEX_UID=${GLOBAL_UID}"
            - "PLEX_GID=${GLOBAL_GID}"
        image: 'plexinc/pms-docker:latest'
